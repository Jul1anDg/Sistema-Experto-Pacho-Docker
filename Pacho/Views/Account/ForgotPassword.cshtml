@model Pacho.Models.ViewModels.ForgotPasswordViewModel
@{
    ViewData["Title"] = "Restablecer contraseña";
    Layout = null;
}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PACHO | Restablecer contraseña</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Reusa el MISMO CSS del login -->
    <link rel="stylesheet" href="~/css/Account/Login.css"/>
    <link rel="stylesheet" href="~/css/Account/ForgotPassword.css">
</head>
<body>
    <!-- Partículas (mismo efecto del login) -->
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>

    <div class="login-wrapper">
        <!-- Panel izquierdo (branding), igual que el login -->
        <div class="brand-panel">
            <div class="brand-content">
                <div class="brand-logo">
                    <img src="https://res.cloudinary.com/dhe88z7gf/image/upload/v1756690174/LogoPaxho_qgrhvg.png " alt="Logo de Pacho" style="height: 80px; margin-right: 5px;">
                    <h1>PACHO | Asistente</h1>
                </div>

                <h2 class="login-title">Recupera tu acceso</h2>
                <p class="login-subtitle">Te enviaremos un enlace seguro al correo registrado</p>

                <ul class="features-list">
                    <li>
                        <i class="fas fa-shield-halved"></i>
                        <div class="feature-text">
                            <h4>Proceso seguro</h4>
                            <p>El enlace de recuperación tiene expiración</p>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-envelope"></i>
                        <div class="feature-text">
                            <h4>Envío inmediato</h4>
                            <p>Revisa tu bandeja de entrada o spam</p>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-lock-open"></i>
                        <div class="feature-text">
                            <h4>Restaura y entra</h4>
                            <p>Crea una nueva contraseña y listo</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Panel derecho (formulario), igual estructura que el login -->
        <div class="login-panel">
            <div class="login-form-container">
                <h2 class="form-title">Restablecer Contraseña</h2>
                <p class="form-subtitle">Ingresa tu correo electrónico para enviarte el enlace</p>

                @if (!ViewData.ModelState.IsValid)
                {
                    <div class="validation-summary" style="color:red;">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    </div>
                }

                @if (ViewBag.Message != null)
                {
                    <div class="notice">@ViewBag.Message</div>
                }

                <form method="post" asp-controller="Account" asp-action="ForgotPassword">
                    @Html.AntiForgeryToken()

                    <div class="form-group">
                        <label class="form-label">Correo Electrónico</label>
                        <div class="input-with-icon">
                            <i class="fas fa-envelope input-icon"></i>
                            <input asp-for="Email" type="email" class="form-input" placeholder="tucorreo@ejemplo.com" autocomplete="email" required />
                        </div>
                        <span asp-validation-for="Email" class="text-danger"></span>
                    </div>

                    <button type="submit" class="login-button">
                        <i class="fas fa-paper-plane"></i> Enviar enlace de recuperación
                    </button>
                </form>

                <div class="divider">
                    <span class="divider-text">¿La recordaste?</span>
                </div>

                <p class="back-link">
                    <a asp-controller="Account" asp-action="Login"><i class="fas fa-arrow-left"></i> Volver al inicio de sesión</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Reutiliza el efecto de partículas del login
        document.querySelectorAll('.particle').forEach(particle => {
            const randomTop = Math.random() * 100;
            const randomLeft = Math.random() * 100;
            const randomDuration = 15 + Math.random() * 15;
            particle.style.top = `${randomTop}%`;
            particle.style.left = `${randomLeft}%`;
            particle.style.animationDuration = `${randomDuration}s`;
        });
    </script>

    @section Scripts {
        <partial name="_ValidationScriptsPartial" />
    }
</body>
</html>
